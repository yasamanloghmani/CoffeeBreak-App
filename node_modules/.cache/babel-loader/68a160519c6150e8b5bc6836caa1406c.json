{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yasamanloghmani/Desktop/CoffeeBreak-App/CoffeeBreak-App/coffeebreak/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/yasamanloghmani/Desktop/CoffeeBreak-App/CoffeeBreak-App/coffeebreak/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/yasamanloghmani/Desktop/CoffeeBreak-App/CoffeeBreak-App/coffeebreak/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yasamanloghmani/Desktop/CoffeeBreak-App/CoffeeBreak-App/coffeebreak/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/yasamanloghmani/Desktop/CoffeeBreak-App/CoffeeBreak-App/coffeebreak/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/yasamanloghmani/Desktop/CoffeeBreak-App/CoffeeBreak-App/coffeebreak/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import GroupHeader from'../../components/GroupHeader/GroupHeader';import GroupDashboard from'../../components/GroupDashboard/GroupDashboard';import ChatBox from'../../components/ChatBox/ChatBox';import userService from'../../utils/userService';import groupService from'../../utils/groupService';import postService from'../../utils/postService';var GroupPage=/*#__PURE__*/function(_Component){_inherits(GroupPage,_Component);var _super=_createSuper(GroupPage);function GroupPage(){var _this;_classCallCheck(this,GroupPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={posts:[],groups:[],lastGroup:{tips:[],users:[],posts:[]}};_this.handleLastGroup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(groupId){var lastGroup;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return groupService.getGroup(groupId);case 2:lastGroup=_context.sent;_this.setState({lastGroup:lastGroup});_this.handlePosts(lastGroup._id);case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handlePosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(groupId){var posts;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return postService.getAllPosts(groupId);case 2:posts=_context2.sent;_this.setState({posts:posts});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleAddPost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(newPostData,groupId){var posts;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return postService.createPost(newPostData,groupId);case 2:posts=_context3.sent;_this.setState({posts:posts});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}();return _this;}_createClass(GroupPage,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var groups;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return userService.getAllGroups(this.props.user.id);case 2:groups=_context4.sent;this.setState({groups:groups});this.handleLastGroup(groups[groups.length-1]);case 5:case\"end\":return _context4.stop();}}},_callee4,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"GroupPage\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flexLeft\"},/*#__PURE__*/React.createElement(GroupHeader,{lastGroup:this.state.lastGroup}),/*#__PURE__*/React.createElement(GroupDashboard,{lastGroup:this.state.lastGroup})),/*#__PURE__*/React.createElement(\"div\",{className:\"flexRight\"},/*#__PURE__*/React.createElement(ChatBox,{lastGroup:this.state.lastGroup,handleAddPost:this.handleAddPost,posts:this.state.posts})));}}]);return GroupPage;}(Component);export default GroupPage;","map":{"version":3,"sources":["/Users/yasamanloghmani/Desktop/CoffeeBreak-App/CoffeeBreak-App/coffeebreak/src/pages/GroupPage/GroupPage.jsx"],"names":["React","Component","GroupHeader","GroupDashboard","ChatBox","userService","groupService","postService","GroupPage","state","posts","groups","lastGroup","tips","users","handleLastGroup","groupId","getGroup","setState","handlePosts","_id","getAllPosts","handleAddPost","newPostData","createPost","getAllGroups","props","user","id","length"],"mappings":"mnCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,WAAP,KAAwB,0CAAxB,CACA,MAAOC,CAAAA,cAAP,KAA2B,gDAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,kCAApB,CACA,MAAOC,CAAAA,WAAP,KAAwB,yBAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,0BAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,yBAAxB,C,GAEMC,CAAAA,S,uUACFC,K,CAAQ,CACJC,KAAK,CAAG,EADJ,CAEJC,MAAM,CAAE,EAFJ,CAGJC,SAAS,CAAG,CAACC,IAAI,CAAG,EAAR,CAAaC,KAAK,CAAG,EAArB,CAAyBJ,KAAK,CAAG,EAAjC,CAHR,C,OAKRK,e,0FAAkB,iBAAOC,OAAP,sJACUV,CAAAA,YAAY,CAACW,QAAb,CAAsBD,OAAtB,CADV,QACRJ,SADQ,eAEd,MAAKM,QAAL,CAAc,CAACN,SAAS,CAATA,SAAD,CAAd,EACA,MAAKO,WAAL,CAAiBP,SAAS,CAACQ,GAA3B,EAHc,sD,qEAMlBD,W,2FAAc,kBAAOH,OAAP,uJACUT,CAAAA,WAAW,CAACc,WAAZ,CAAwBL,OAAxB,CADV,QACJN,KADI,gBAEV,MAAKQ,QAAL,CAAc,CAACR,KAAK,CAALA,KAAD,CAAd,EAFU,wD,uEAIdY,a,2FAAgB,kBAAOC,WAAP,CAAoBP,OAApB,uJACQT,CAAAA,WAAW,CAACiB,UAAZ,CAAuBD,WAAvB,CAAoCP,OAApC,CADR,QACNN,KADM,gBAEZ,MAAKQ,QAAL,CAAc,CAACR,KAAK,CAALA,KAAD,CAAd,EAFY,wD,8YAKSL,CAAAA,WAAW,CAACoB,YAAZ,CAAyB,KAAKC,KAAL,CAAWC,IAAX,CAAgBC,EAAzC,C,QAAfjB,M,gBACN,KAAKO,QAAL,CAAc,CAACP,MAAM,CAANA,MAAD,CAAd,EACA,KAAKI,eAAL,CAAqBJ,MAAM,CAACA,MAAM,CAACkB,MAAP,CAAc,CAAf,CAA3B,E,iNAGI,CACJ,mBACI,2BAAK,SAAS,CAAC,WAAf,eACI,2BAAK,SAAS,CAAC,UAAf,eACA,oBAAC,WAAD,EAAa,SAAS,CAAE,KAAKpB,KAAL,CAAWG,SAAnC,EADA,cAEA,oBAAC,cAAD,EAAgB,SAAS,CAAE,KAAKH,KAAL,CAAWG,SAAtC,EAFA,CADJ,cAKI,2BAAK,SAAS,CAAC,WAAf,eACA,oBAAC,OAAD,EAAS,SAAS,CAAE,KAAKH,KAAL,CAAWG,SAA/B,CAA0C,aAAa,CAAE,KAAKU,aAA9D,CAA6E,KAAK,CAAE,KAAKb,KAAL,CAAWC,KAA/F,EADA,CALJ,CADJ,CAcH,C,uBAzCmBT,S,EA8CxB,cAAeO,CAAAA,SAAf","sourcesContent":["import React, { Component } from \"react\";\nimport GroupHeader from '../../components/GroupHeader/GroupHeader';\nimport GroupDashboard from '../../components/GroupDashboard/GroupDashboard';\nimport ChatBox from '../../components/ChatBox/ChatBox';\nimport userService from '../../utils/userService';\nimport groupService from '../../utils/groupService';\nimport postService from '../../utils/postService';\n\nclass GroupPage extends Component{\n    state = {\n        posts : [],\n        groups: [],\n        lastGroup : {tips : [] , users : [], posts : []}\n    }\n    handleLastGroup = async (groupId) => {\n        const lastGroup = await groupService.getGroup(groupId);\n        this.setState({lastGroup});\n        this.handlePosts(lastGroup._id);\n        \n    }\n    handlePosts = async (groupId) => {\n        const posts = await postService.getAllPosts(groupId);\n        this.setState({posts})\n    }\n    handleAddPost = async (newPostData, groupId) => {\n        const posts = await postService.createPost(newPostData, groupId);\n        this.setState({posts})\n    }\n    async componentDidMount() {\n        const groups = await userService.getAllGroups(this.props.user.id);\n        this.setState({groups});\n        this.handleLastGroup(groups[groups.length-1]) \n    }\n    \n    render(){\n        return(\n            <div className='GroupPage'>\n                <div className='flexLeft'>\n                <GroupHeader lastGroup={this.state.lastGroup}></GroupHeader>\n                <GroupDashboard lastGroup={this.state.lastGroup}></GroupDashboard>\n                </div>\n                <div className='flexRight'>\n                <ChatBox lastGroup={this.state.lastGroup} handleAddPost={this.handleAddPost} posts={this.state.posts}></ChatBox>\n                </div>\n                \n               \n            </div>\n        );\n\n    }\n    \n}\n\n\nexport default GroupPage;"]},"metadata":{},"sourceType":"module"}