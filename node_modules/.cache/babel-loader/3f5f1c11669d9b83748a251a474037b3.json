{"ast":null,"code":"var _jsxFileName = \"/Users/yasamanloghmani/Desktop/CoffeeBreak-App/CoffeeBreak-App/coffeebreak/src/pages/App/App.js\";\nimport React, { Component } from 'react';\nimport coffeeService from '../../utils/coffeeService';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport Menu from '../../components/Menu/Menu';\nimport SignupPage from '../../pages/SignupPage/SignupPage';\nimport LoginPage from '../../pages/LoginPage/LoginPage';\nimport ProfilePage from '../ProfilePage/ProfilePage';\nimport GroupPage from '../GroupPage/GroupPage';\nimport MainDashboard from '../MainDashboard/MainDashboard';\nimport userService from '../../utils/userService';\nimport { ThemeProvider } from 'styled-components';\nimport { lightTheme, darkTheme } from '../Theme/theme';\nimport { GlobalStyles } from '../Theme/global'; // import tokenService from '../../utils/tokenService';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: userService.getUser()\n    };\n\n    this.handleAddCoffee = async newCoffeeData => {\n      const coffees = await coffeeService.create(newCoffeeData, this.state.user.id);\n      this.setState(state => ({\n        coffees\n      }), // Using cb to wait for state to update before rerouting\n      () => this.props.history.push('/'));\n    };\n\n    this.toggleTheme = () => {\n      if (this.state.theme === 'light') {\n        this.setState({\n          theme: 'dark'\n        });\n      } else {\n        this.setState({\n          theme: 'light'\n        });\n      }\n    };\n\n    this.handleLogout = () => {\n      userService.logout();\n      this.setState({\n        user: null\n      });\n    };\n\n    this.handleSignupOrLogin = () => {\n      this.setState({\n        user: userService.getUser()\n      });\n    };\n\n    this.handleDeleteProfile = () => {\n      this.setState({\n        user: null\n      });\n    };\n\n    this.calculateSumOfSize = () => {};\n  }\n\n  getData(percent) {\n    return [{\n      x: 1,\n      y: percent\n    }, {\n      x: 2,\n      y: 100 - percent\n    }];\n  }\n\n  async componentDidMount() {\n    const coffees = await coffeeService.getAll(this.state.user.id);\n    const sumSize = coffees.reduce(function (prev, cur) {\n      return prev + cur.size;\n    }, 0);\n    const sumCost = coffees.reduce(function (prev, cur) {\n      return prev + cur.price;\n    }, 0);\n    const percent = sumCost / this.state.user.limitOfExpense * 100;\n    this.setState({\n      coffees,\n      sumSize,\n      sumCost,\n      percent,\n      data: this.getData(percent)\n    });\n    console.log(sumCost);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(ThemeProvider, {\n      theme: this.state.theme === 'light' ? lightTheme : darkTheme,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(GlobalStyles, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(Menu, {\n      user: this.state.user,\n      handleLogout: this.handleLogout,\n      toggleTheme: this.toggleTheme,\n      theme: this.state.theme,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: ({\n        history\n      }) => userService.getUser() ? /*#__PURE__*/React.createElement(MainDashboard, {\n        history: history,\n        user: this.state.user,\n        handleAddCoffee: this.handleAddCoffee,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }\n      }) : /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/profile\",\n      render: ({\n        history\n      }) => userService.getUser() ? /*#__PURE__*/React.createElement(ProfilePage, {\n        history: history,\n        user: this.state.user,\n        handleDeleteProfile: this.handleDeleteProfile,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 15\n        }\n      }) : /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/group\",\n      render: ({\n        history\n      }) => userService.getUser() ? /*#__PURE__*/React.createElement(GroupPage, {\n        history: history,\n        user: this.state.user,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }\n      }) : /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/signup\",\n      render: ({\n        history\n      }) => /*#__PURE__*/React.createElement(SignupPage, {\n        history: history,\n        handleSignupOrLogin: this.handleSignupOrLogin,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      render: ({\n        history\n      }) => /*#__PURE__*/React.createElement(LoginPage, {\n        history: history,\n        handleSignupOrLogin: this.handleSignupOrLogin,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }\n    })))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/yasamanloghmani/Desktop/CoffeeBreak-App/CoffeeBreak-App/coffeebreak/src/pages/App/App.js"],"names":["React","Component","coffeeService","Route","Switch","Redirect","Menu","SignupPage","LoginPage","ProfilePage","GroupPage","MainDashboard","userService","ThemeProvider","lightTheme","darkTheme","GlobalStyles","App","state","user","getUser","handleAddCoffee","newCoffeeData","coffees","create","id","setState","props","history","push","toggleTheme","theme","handleLogout","logout","handleSignupOrLogin","handleDeleteProfile","calculateSumOfSize","getData","percent","x","y","componentDidMount","getAll","sumSize","reduce","prev","cur","size","sumCost","price","limitOfExpense","data","console","log","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport coffeeService from '../../utils/coffeeService';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport { Route, Switch, Redirect} from 'react-router-dom';\nimport Menu from '../../components/Menu/Menu';\nimport SignupPage from '../../pages/SignupPage/SignupPage';\nimport LoginPage from '../../pages/LoginPage/LoginPage';\nimport ProfilePage from '../ProfilePage/ProfilePage';\nimport GroupPage from '../GroupPage/GroupPage';\nimport MainDashboard from '../MainDashboard/MainDashboard';\nimport userService from '../../utils/userService';\nimport { ThemeProvider } from 'styled-components';\nimport { lightTheme, darkTheme } from '../Theme/theme';\nimport { GlobalStyles } from '../Theme/global';\n// import tokenService from '../../utils/tokenService';\n\nclass App extends Component {\n  state = {\n    user: userService.getUser()\n}\ngetData(percent) {\n  return [{ x: 1, y: percent }, { x: 2, y: 100 - percent }];\n}\n\nhandleAddCoffee = async newCoffeeData => {\n  const coffees = await coffeeService.create(newCoffeeData, this.state.user.id);\n  this.setState(state => ({\n    coffees\n  }),\n  // Using cb to wait for state to update before rerouting\n  () => this.props.history.push('/'));\n}\n\ntoggleTheme = () => {\n  if (this.state.theme === 'light') {\n    this.setState({theme : 'dark'});\n  } else {\n    this.setState({theme : 'light'});\n  }\n}\n\nhandleLogout = () => {\n    userService.logout();\n    this.setState({ user: null });\n}\n\nhandleSignupOrLogin = () => {\n    this.setState({ user: userService.getUser() });\n}\nhandleDeleteProfile = () => {\n  this.setState({ user: null });\n};\ncalculateSumOfSize = () => {\n  \n}\n\nasync componentDidMount() {\n  const coffees = await coffeeService.getAll(this.state.user.id);\n  const sumSize = coffees.reduce(function(prev, cur){\n    return prev + cur.size;\n  }, 0);\n  const sumCost = coffees.reduce(function(prev, cur){\n    return prev + cur.price;\n  }, 0);\n  const percent = (sumCost / this.state.user.limitOfExpense ) *100;\n  this.setState({coffees , sumSize, sumCost, percent, data: this.getData(percent)});\n\n  console.log(sumCost)\n}\n\n\n  render() {\n  return (\n    <ThemeProvider theme={this.state.theme === 'light' ? lightTheme : darkTheme}>\n    <div className='main-page'>\n    <GlobalStyles />\n      <Menu \n        user={this.state.user}\n        handleLogout={this.handleLogout}\n        toggleTheme={this.toggleTheme}\n        theme={this.state.theme}\n      />\n      <div>\n      \n      <Switch>  \n        <Route\n          exact\n          path=\"/\"\n          render={({ history }) => \n          userService.getUser() ? (\n          <MainDashboard\n            history={history}\n            user={this.state.user}\n            handleAddCoffee={this.handleAddCoffee}\n            />\n            ) : (\n              <Redirect to=\"/login\" />\n              )\n          }\n      />\n        <Route \n          exact\n           path=\"/profile\" \n           render={({ history }) => \n            userService.getUser() ? (\n              <ProfilePage \n                history={history}\n                user = {this.state.user}\n                handleDeleteProfile={this.handleDeleteProfile}\n              />\n              ) : (\n                <Redirect to=\"/login\" />\n                )\n              }\n          />\n        <Route\n      \n          exact\n          path=\"/group\"\n          render={({ history }) =>\n          userService.getUser() ? (\n            <GroupPage\n              history={history}\n              user={this.state.user}/>\n              ) : (\n                <Redirect to=\"/login\" />\n            )\n          }\n      />\n        <Route exact path=\"/signup\" render={({ history }) => (\n            <SignupPage history={history} handleSignupOrLogin={this.handleSignupOrLogin} />\n        )} />\n        <Route exact path=\"/login\" render={({ history }) => (\n            <LoginPage history={history} handleSignupOrLogin={this.handleSignupOrLogin} />\n        )} />\n        \n        </Switch>\n      </div>\n    </div>\n    </ThemeProvider>\n  );\n        }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}