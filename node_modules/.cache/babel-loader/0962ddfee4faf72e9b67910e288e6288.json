{"ast":null,"code":"var _jsxFileName = \"/Users/yasamanloghmani/Desktop/CoffeeBreak-App/CoffeeBreak-App/coffeebreak/src/pages/MainDashboard/MainDashboard.jsx\";\nimport React, { Component } from \"react\";\nimport './MainDashboard.css';\nimport coffeeService from '../../utils/coffeeService';\nimport groupService from '../../utils/groupService';\nimport MainHeader from '../../components/MainHeader/MainHeader';\nimport Dashboard from '../../components/Dashboard/Dashboard';\nimport GroupView from '../../components/GroupView/GroupView';\n\nclass MainDashboard extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      coffees: [],\n      theme: 'light',\n      sumSize: 0,\n      sumCost: 0,\n      costpercent: 0,\n      costdata: this.getCostData(0),\n      sizepercent: 0,\n      sizedata: this.getSizeData(0),\n      group: [{}]\n    };\n\n    this.handleAddCoffee = async newCoffeeData => {\n      const coffees = await coffeeService.create(newCoffeeData, this.props.user.id);\n      const sumSize = coffees.reduce(function (prev, cur) {\n        return prev + cur.size;\n      }, 0);\n      const sumCost = coffees.reduce(function (prev, cur) {\n        return prev + cur.price;\n      }, 0);\n      const costpercent = sumCost / this.props.user.limitOfExpense * 100;\n      const sizepercent = sumSize / this.props.user.limitOfCoffee * 100;\n      this.setState({\n        coffees,\n        sumCost,\n        sumSize,\n        costpercent,\n        costdata: this.getCostData(costpercent),\n        sizepercent,\n        sizedata: this.getSizeData(sizepercent)\n      }); // Using cb to wait for state to update before rerouting\n    };\n\n    this.handleAddGroup = async newGroupData => {\n      const group = await groupService.create(newGroupData);\n      this.setState({\n        group\n      }); // await groupService.join(this.state.group.id)\n    };\n\n    this.handleJoinGroup = async joinGroup => {\n      const usergroup = await groupService.join(joinGroup);\n      this.setState({\n        group\n      }); // await groupService.join(this.state.group.id)\n    };\n  }\n\n  getCostData(costpercent) {\n    return [{\n      x: 1,\n      y: costpercent\n    }, {\n      x: 2,\n      y: 100 - costpercent\n    }];\n  }\n\n  getSizeData(sizepercent) {\n    return [{\n      x: 1,\n      y: sizepercent\n    }, {\n      x: 2,\n      y: 100 - sizepercent\n    }];\n  }\n\n  async componentDidMount() {\n    const coffees = await coffeeService.getAll(this.props.user.id);\n    const group = await groupService.getAll();\n    const sumSize = coffees.reduce(function (prev, cur) {\n      return prev + cur.size;\n    }, 0);\n    const sumCost = coffees.reduce(function (prev, cur) {\n      return prev + cur.price;\n    }, 0);\n    const costpercent = sumCost / this.props.user.limitOfExpense * 100;\n    const sizepercent = sumSize / this.props.user.limitOfCoffee * 100;\n    this.setState({\n      coffees,\n      sumCost,\n      sumSize,\n      costpercent,\n      costdata: this.getCostData(costpercent),\n      sizepercent,\n      sizedata: this.getSizeData(sizepercent),\n      group\n    });\n  }\n\n  async shouldComponentUpdate() {\n    return true;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"MainDashboard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flexLeft\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(MainHeader, {\n      user: this.props.user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Dashboard, {\n      user: this.props.user,\n      handleAddCoffee: this.handleAddCoffee,\n      costpercent: this.state.costpercent,\n      costdata: this.state.costdata,\n      sizepercent: this.state.sizepercent,\n      sizedata: this.state.sizedata,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flexRight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(GroupView, {\n      user: this.props.user,\n      handleAddGroup: this.handleAddGroup,\n      group: this.state.group,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }\n    })));\n  }\n\n}\n\nexport default MainDashboard;","map":{"version":3,"sources":["/Users/yasamanloghmani/Desktop/CoffeeBreak-App/CoffeeBreak-App/coffeebreak/src/pages/MainDashboard/MainDashboard.jsx"],"names":["React","Component","coffeeService","groupService","MainHeader","Dashboard","GroupView","MainDashboard","state","coffees","theme","sumSize","sumCost","costpercent","costdata","getCostData","sizepercent","sizedata","getSizeData","group","handleAddCoffee","newCoffeeData","create","props","user","id","reduce","prev","cur","size","price","limitOfExpense","limitOfCoffee","setState","handleAddGroup","newGroupData","handleJoinGroup","joinGroup","usergroup","join","x","y","componentDidMount","getAll","shouldComponentUpdate","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport './MainDashboard.css';\nimport coffeeService from '../../utils/coffeeService';\nimport groupService from '../../utils/groupService';\nimport MainHeader from '../../components/MainHeader/MainHeader';\nimport Dashboard from '../../components/Dashboard/Dashboard';\nimport GroupView from '../../components/GroupView/GroupView';\n\n\nclass MainDashboard extends Component{\n   state = {\n    coffees : [],\n    theme : 'light',\n    sumSize : 0,\n    sumCost : 0,\n    costpercent: 0,\n    costdata: this.getCostData(0),\n    sizepercent: 0,\n    sizedata: this.getSizeData(0),\n    group : [{}],\n    \n   }\n\n  getCostData(costpercent) {\n      return [{ x: 1, y: costpercent }, { x: 2, y: 100 - costpercent }];\n  }\n  \n  getSizeData(sizepercent) {\n      return [{ x: 1, y: sizepercent }, { x: 2, y: 100 - sizepercent }];\n  }\n  handleAddCoffee = async newCoffeeData => {\n    const coffees = await coffeeService.create(newCoffeeData, this.props.user.id);\n    const sumSize = coffees.reduce(function(prev, cur) {\n      return prev + cur.size;\n    }, 0);\n    const sumCost = coffees.reduce(function(prev, cur){\n      return prev + cur.price;\n    }, 0);\n    const costpercent = (sumCost / this.props.user.limitOfExpense ) *100;\n    const sizepercent = (sumSize / this.props.user.limitOfCoffee ) *100;\n    this.setState({coffees, sumCost, sumSize, costpercent, costdata: this.getCostData(costpercent), sizepercent, sizedata: this.getSizeData(sizepercent)});\n    // Using cb to wait for state to update before rerouting\n  }\n\n  handleAddGroup = async newGroupData => {\n    const group = await groupService.create(newGroupData);\n    this.setState({group})\n    // await groupService.join(this.state.group.id)\n  }\n\n  handleJoinGroup = async joinGroup => {\n    const usergroup = await groupService.join(joinGroup);\n    this.setState({group})\n    // await groupService.join(this.state.group.id)\n  }\n\n  async componentDidMount() {\n    const coffees = await coffeeService.getAll(this.props.user.id);\n    const group = await groupService.getAll();\n    const sumSize = coffees.reduce(function(prev, cur) {\n      return prev + cur.size;\n    }, 0);\n    const sumCost = coffees.reduce(function(prev, cur){\n      return prev + cur.price;\n    }, 0);\n    const costpercent = (sumCost / this.props.user.limitOfExpense ) *100;\n    const sizepercent = (sumSize / this.props.user.limitOfCoffee ) *100;\n    this.setState({coffees, sumCost, sumSize, costpercent, costdata: this.getCostData(costpercent), sizepercent, sizedata: this.getSizeData(sizepercent), group});\n  }\n\n  async shouldComponentUpdate(){\n    return true;\n  }\n    render(){\n        return(\n            <div className='MainDashboard'>\n                <div className='flexLeft'>\n                <MainHeader user={this.props.user}></MainHeader>\n                <Dashboard user={this.props.user} handleAddCoffee={this.handleAddCoffee} costpercent={this.state.costpercent} costdata={this.state.costdata} sizepercent={this.state.sizepercent} sizedata={this.state.sizedata}>\n                </Dashboard>\n                </div>\n                <div className='flexRight'>\n                <GroupView user={this.props.user} handleAddGroup={this.handleAddGroup} group={this.state.group}></GroupView>\n                </div>\n                \n                \n            </div>\n        );\n    }\n}\n\nexport default MainDashboard;"]},"metadata":{},"sourceType":"module"}